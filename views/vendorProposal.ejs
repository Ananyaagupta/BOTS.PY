<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>form</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
    />
    <link
      rel="icon"
      href="/images/favicon-16x16.png"
      type="image/x-icon"
      sizes="16x16"
    />
    <link rel="stylesheet" href="/styles/readmoree.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  <body>
    <br />
    <center><h1>SEND PROPOSAL TO MANUFACTURER</h1></center>
    <div class="container">
      <header class="header">
        <h1 id="title" class="text-center"><%=rfp.rawMaterial%></h1>
        <div class="rfp-detail" style="width: 100%">
          <div
            class="manufacturer"
            style="display: flex; justify-content: space-between"
          >
            <p>Manufacturer: <%= rfp.manufacturer %></p>
            <p>Deadline: <%= rfp.deadline.toLocaleDateString() %></p>
          </div>
          <div
            class="dates"
            style="display: flex; justify-content: space-between"
          >
            <p>Start Date: <%=rfp.startDate.toLocaleDateString() %></p>
            <p>End Date: <%=rfp.endDate.toLocaleDateString() %></p>
          </div>
          <div>
          <p>Comments: <%=rfp.comment %></p>
        </div>
    </div>
      </header>
      <form id="survey-form">
        <div style="margin-top: 1rem">
          <h2>Expected Start Date</h2>
          <input type="date" id="startDate" value=<%=rfp.startDate.toLocaleDateString().value %> />
        </div>
        <div style="margin-top: 1rem">
          <h2>Expected End Date</h2>
          <input type="date" id="endDate" value=<%=rfp.endDate.toLocaleDateString().value %>/>
        </div>
        <div style="margin-top: 1rem">
          <h2>Total Cost Per Unit</h2>
          <input id="cost" />
        </div>
        <div style="margin-top: 1rem">
            <h2>Delivery Mode</h2>
            <input id="deliveryMode" type="text" />
          </div>
        <br />
        <br />
        <div  id="agreementId" style="display: none;"><%=rfp._id %></div>
        <div class="form-group">
          <p>Any comments or suggestions?</p>
          <textarea
            id="comments"
            class="input-textarea"
            name="comment"
            placeholder="Enter your comment here..."
          ></textarea>
        </div>

        <div class="form-group">
          <button type="submit" id="submit" class="submit-button">
            Submit
          </button>
        </div>
      </form>
    </div>

    <!-- partial -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
      $("#submit").click(function (event) {
        event.preventDefault();
        $(':input[type="submit"]').prop("disabled", true);
        $(':input[type="submit"]').html("<div class='loader'></div>");
        const costPerUnit = $("#cost").val();
        const startDate = $("#startDate").val();
        const endDate = $("#endDate").val();
        const deliveryMode = $("#deliveryMode").html();
        const comment = $("#comments").val()
        const id = $("#agreementId").html();
        console.log(id)
        $.post(
          `/vendor/send-proposal/${id}`,
          {
            costPerUnit,
            startDate,
            endDate,
            deliveryMode,
            comment
          },
          (status, data) => {
            $(':input[type="submit"]').html(
              "Proposal Sent <span class='material-icons-outlined'></span>"
            );
          }
        );
      });
    </script>
  </body>
</html>
